/* Bootstrap 5+ bridge classes */

/* These classes map Bootstrap 5 syntax to Bootstrap 4 equivalents */
/* They allow us to use newer Bootstrap 5 class names in a Bootstrap 4 codebase, */
/* making the eventual upgrade to Bootstrap 5 smoother and less disruptive */

/* The .close class has been replaced with .btn-close */
button.btn-close { @extend button.close !optional; }

// The .no-gutters class has been replaced with .g-0
// Use class="row g-0" instead of "row no-gutters"
.g-0          { @extend .no-gutters !optional; }

// Float direction
.float-start  { @extend .float-left !optional; }
.float-end    { @extend .float-right !optional; }

// Border direction
.border-start { @extend .border-left !optional; }
.border-end   { @extend .border-right !optional; }

// Rounded corners
.rounded-start { @extend .rounded-left !optional; }
.rounded-end   { @extend .rounded-right !optional; }
// .rounded-0 { @extend .rounded-0 !optional; } // no change
.rounded-1 { @extend .rounded-sm !optional; }
.rounded-2 { @extend .rounded !optional; }
.rounded-3 { @extend .rounded-lg !optional; }
.rounded-4 { @extend .rounded-xl !optional; } // new BS5.2
.rounded-5 { @extend .rounded-xxl !optional; } // new BS5.3 (replaces rounded-2xl from BS5.2)

// Text alignment direction
.text-start   { @extend .text-left !optional; }
.text-end     { @extend .text-right !optional; }

// Screen reader utilities
.visually-hidden { @extend .sr-only !optional; }
.visually-hidden-focusable { @extend .sr-only-focusable !optional; }

// Font weight
.fw-light     { @extend .font-weight-light !optional; }
.fw-lighter   { font-weight: lighter !important; } // Not explicitly in BS4
.fw-normal    { @extend .font-weight-normal !optional; }
.fw-semibold  { font-weight: 600; } // Introduced in BS5.2
.fw-bold      { @extend .font-weight-bold !optional; }
.fw-bolder    { font-weight: bolder !important; } // Not explicitly in BS4

// Font style
.fst-italic   { @extend .font-italic !optional; }
.fst-normal   { font-style: normal !important; }

.font-monospace { @extend .text-monospace !optional; }

// Colours that should use dark text (bootstrap 4)
$dark-text-backgrounds-bs-4: warning, light;

// badge styles - reset these up so we can use the new styles with badges too
// This also allows us to use bg-* and text-* classes on badges directly (bootstrap 5 style)
.badge {
  @extend .text-white;
}

@each $name in $dark-text-backgrounds-bs-4 {
  .badge-#{$name} {
    @extend .text-dark;
  }
}

// Colours that should use dark text (bootstrap 5 onwards)
// NB info is now dark text rather than white text!
$dark-text-backgrounds-bs-5: warning, info, light;

// bootstrap 5.2+ new colours that can be used with badges or other elements
// text-bg-* classes

@each $name, $value in $theme-colors {
  .text-bg-#{$name} {
    @extend .bg-#{$name};
    @if index($dark-text-backgrounds-bs-5, $name) {
      @extend .text-dark;
    } @else {
      @extend .text-white;
    }
  }
}

.badge.rounded-pill {
  padding-right: 0.6em;
  padding-left: 0.6em;
}

// NB For BS 5, we have .order-0 to .order-5 (6 to 12 no longer present)
// Plus order-first, order-last
// and responsive variants, such as .order-sm-3, .order-xxl-5, .order-xxl-first, .order-xxl-last

// Padding and margins
// Generate all spacer classes for all breakpoints for directions start and end.
// ps-1 > pl-1, pe-1 > pr-1, me-sm-1 > ml-sm-1, ...
@each $breakpoint in map-keys($grid-breakpoints) {
  $infix: breakpoint-infix($breakpoint, $grid-breakpoints);
  @each $prop, $abbrev in (margin: m, padding: p) {
    @each $size, $length in $spacers {
      .#{$abbrev}s#{$infix}-#{$size} {
        @extend .#{$abbrev}l#{$infix}-#{$size};
      }
      .#{$abbrev}e#{$infix}-#{$size} {
        @extend .#{$abbrev}r#{$infix}-#{$size};
      }
    }
  }
}

// Margin auto classes
// Generate all margin auto classes for all breakpoints for directions start and end.
// ps-auto > pl-auto, pe-auto > pr-auto, me-sm-auto > ml-sm-auto, ...
@each $breakpoint in map-keys($grid-breakpoints) {
  $infix: breakpoint-infix($breakpoint, $grid-breakpoints);
  .ms#{$infix}-auto {
      @extend .ml#{$infix}-auto;
  }
  .me#{$infix}-auto {
      @extend .mr#{$infix}-auto;
  }
}

/* Make BS5-style input-group buttons sit flush in BS4 */
.input-group > .btn,
.input-group > button {
  border-top-left-radius: 0;
  border-bottom-left-radius: 0;
  margin-left: -1px;
}
