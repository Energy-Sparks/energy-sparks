<div id="<%= id %>" class="school-search-component mt-4">
  <ul class="nav nav-tabs" id="search-tabs" role="tablist">
    <% TABS.each do |tab| %>
      <li class="nav-item">
        <a class="nav-link <%= 'active' if tab_active?(tab) %>" id="<%= label(tab, 'tab') %>"
           data-toggle="tab" href="#<%= label(tab, 'content') %>" role="tab" aria-controls="<%= label(tab, 'content') %>">
           <%= t("components.school_search.#{tab}.tab") %>
         </a>
      </li>
    <% end %>
    <li class="nav-item ml-auto">
      <h6><%= t('components.school_search.schools.total', count: schools_count) %></h6>
    </li>
  </ul>

  <div class="tab-content" id="search-tabs-content">
    <% TABS.each do |tab| %>
      <div class="tab-pane fade <%= 'show active' if tab_active?(tab) %>"
           id="<%= label(tab, 'content') %>"
           role="tabpanel"
           aria-labelledby="<%= label(tab, 'tab') %>">
        <div class="row mt-4">
          <div class="col-12 col-md-2">
          <%= form_tag search_path,
                       method: :get,
                       remote: true,
                       onsubmit: "$(this).closest('#schools-content').find('.pagination').children('.page-item').removeClass('active');" do %>

            <div class="input-group mb-3">
              <%= text_field_tag :keyword, keyword, class: 'form-control', autocomplete: :off %>
              <div class="input-group-append">
                <button type="submit" class="btn btn-outline-secondary school-search-button">
                  <%= fa_icon('search') %>
                </button>
              </div>
            </div>

            <%= hidden_field_tag :scope, tab %>
          <% end %>
          </div>
          <div class="col-12 col-md-10">
            <nav aria-label="<%= t("components.school_search.#{tab}.pagination")%>">
              <ul class="pagination justify-content-start justify-content-md-end flex-wrap">
                <% ('A'..'Z').each do |letter| %>
                  <li class="page-item mr-1 <%= letter_status(tab, letter) %>">
                    <%= link_to letter,
                                search_path(letter: letter, scope: tab),
                                class: 'page-link',
                                title: letter_title(tab, letter),
                                remote: true,
                                onclick: "$(this).closest('.pagination').children('.page-item').removeClass('active');$(this).parent().addClass('active')" %>
                  </li>
                <% end %>
              </ul>
            </nav>
          </div>
        </div>
        <hr>
        <div id="<%= label(tab, 'results') %>">
          <% if tab_active?(tab) %>
            <%= component 'search_results' do |c| %>
              <% c.with_title { default_results_title } %>
              <% c.with_subtitle { default_results_subtitle } %>
              <% default_results.each do |result| %>
                <% c.with_result do %>
                  <%= link_to result.name, tab == :schools ? school_path(result) : school_group_path(result) %>
                  <% if tab == :schools %>
                    - <span class="smaller"><%= result.school_group.name %></span>
                  <% end %>
                <% end %>
              <% end %>
            <% end %>
          <% end %>
        </div>
      </div>
    <% end %>
  </div>
</div>
