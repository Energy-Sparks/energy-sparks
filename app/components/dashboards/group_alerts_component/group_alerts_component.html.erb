<%= tag.div id: id, class: classes do %>
  <% if title? || link? %>
    <div class="row">
      <div class="col d-flex flex-wrap justify-content-between align-items-center">
        <% if title? %>
          <h3><%= title %></h3>
        <% end %>
        <% if link? %>
          <div>
            <%= link %>
          </div>
        <% end %>
      </div>
    </div>
  <% end %>
  <% prompts.each do |prompt| %>
    <%= prompt %>
  <% end %>
  <% if grouped? %>
    <% grouped_alerts.each do |alert_group, alerts_in_group| %>
      <div id="<%= alert_group %>-alerts">
        <h3><%= t("advice_pages.alerts.groups.#{alert_group}") %></h3>
        <% alerts_in_group.each do |alert_content| %>
          <%= render PromptComponent.new(
                icon: alert_type_icon(alert_content.alert_type),
                fuel_type: alert_content.alert_type.fuel_type,
                status: status_for_alert_colour(alert_content.colour)
              ) do |prompt| %>
              <% if advice_link?(alert_content.alert_type) %>
                <% prompt.with_link do %>
                  <%= link_to t('schools.show.find_out_more'),
                              helpers.advice_page_path(school_group, alert_content.advice_page, :analysis) %>
                <% end %>
              <% end %>
              <%= alert_content.group_dashboard_title %>
          <% end %>
        <% end %>
      </div>
    <% end %>
  <% else %>
    <% alerts.take(limit).each do |alert_content| %>
      <%= render PromptComponent.new(
            icon: alert_type_icon(alert_content.alert_type),
            fuel_type: alert_content.alert_type.fuel_type,
            status: status_for_alert_colour(alert_content.colour)
          ) do |prompt| %>
          <% if advice_link?(alert_content.alert_type) %>
            <% prompt.with_link do %>
              <%= link_to t('schools.show.find_out_more'),
                          helpers.advice_page_path(school_group, alert_content.advice_page, :analysis) %>
            <% end %>
          <% end %>
          <%= alert_content.group_dashboard_title %>
      <% end %>
    <% end %>
  <% end %>
<% end %>
