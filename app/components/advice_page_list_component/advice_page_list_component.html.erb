<div id="<%= id %>" class="advice-page-list-component <%= classes %>">
  <%= component 'titled_section' do |section| %>
    <% section.with_title do %>
      <h2><%= t('components.advice_page_list.title') %></h2>
    <% end %>
    <% section.with_intro do %>
      <p><%= t('components.advice_page_list.intro') %></p>
    <% end %>
    <% section.with_body do %>
      <% advice_pages.display_fuel_types.keys.each_with_index do |fuel_type, idx| %>
        <% if display_advice_page?(school, fuel_type) %>
          <% sort_by_label(advice_pages.where(fuel_type: fuel_type)).each do |ap| %>
            <%= component 'prompt', icon: fuel_type_icon(fuel_type) do |p| %>
              <% p.with_title do %>
                <%= translated_label(ap) %>
              <% end %>

              <% school_benchmark = advice_page_benchmarks.where(advice_page: ap).first %>
              <% if school_benchmark.present? %>
                <% p.with_pill do %>
                  <span class="badge <%= school_benchmark.benchmarked_as %>">
                    <%= t("advice_pages.benchmarks.#{school_benchmark.benchmarked_as}") %>
                  </span>
                <% end %>
              <% end %>

              <% p.with_link do %>
                <%= link_to 'XXX', advice_page_path(school, ap) %>
              <% end %>

              <% if ap.key == 'solar_pv' %>
                <% solar_status = @school.has_solar_pv? ? 'has_solar' : 'no_solar' %>
                <%= t("advice_pages.index.show.page_summary.solar_pv.#{solar_status}") %>
              <% else %>
                <%= t("advice_pages.index.show.page_summary.#{ap.key}") %>
              <% end %>

            <% end %>
          <% end %>
        <% end %>
      <% end %>
    <% end %>
  <% end %>
</div>
