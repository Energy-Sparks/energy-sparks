<div class="row mt-4">
  <div class="col">
    <div class="energy_tariff">
      <%= t('schools.user_tariffs.index.introduction_html', advice_pages: school_advice_path(@tariff_holder)) if @tariff_holder.school? %>

      <p><%= t('schools.user_tariffs.index.changes_to_cost_calculations_message') %></p>

      <div class="row">
        <div class="col">
          <% if @tariff_holder.holds_tariffs_of_type?(:electricity) %>
            <h4>
              <span class="<%= fuel_type_class(:electricity) %>">
                <%= fa_icon( fuel_type_icon(:electricity) ) %>
              </span>
              <%= t('schools.user_tariffs.index.electricity.header') %>
            </h4>

            <% if @tariff_holder.any_tariffs_of_type?(:electricity) %>
              <%= render 'energy_tariffs_summary_table', meter_type: :electricity, tariffs: sorted_tariffs(@tariff_holder, :electricity) %>
            <% else %>
              <p><%= t('schools.user_tariffs.index.electricity.there_are_no_electricity_tariffs_set_up_yet') %></p>
              <p>
                <% if @electricity_meters&.dcc&.any? %>
                  <%= t('schools.user_tariffs.index.note_about_smart_meter_tariffs') %>
                <% else %>
                  <%= t('schools.user_tariffs.index.note_about_defaults') %>
                <% end %>
              </p>
            <% end %>
            <div class="mt-4">
              <%= link_to t("schools.user_tariffs.index.electricity.add_label"), new_energy_tariff_path(@tariff_holder, meter_type: :electricity), class: 'btn btn-success' %>
            </div>
          <% end %>
        </div>
      </div>

      <div class="row mt-4">
        <div class="col">
          <% if @tariff_holder.holds_tariffs_of_type?(:gas) %>
            <h4>
              <span class="<%= fuel_type_class(:gas) %>">
                <%= fa_icon( fuel_type_icon(:gas) ) %>
              </span>
              <%= t('schools.user_tariffs.index.gas.header') %>
            </h4>
            <% if @tariff_holder.any_tariffs_of_type?(:gas) %>
              <%= render 'energy_tariffs_summary_table', meter_type: :gas, tariffs: sorted_tariffs(@tariff_holder, :gas) %>
            <% else %>
              <p><%= t('schools.user_tariffs.index.gas.there_are_no_gas_tariffs_set_up_yet') %></p>
              <p>
                <% if @gas_meters.dcc.any? %>
                  <%= t('schools.user_tariffs.index.note_about_smart_meter_tariffs') %>
                <% else %>
                  <%= t('schools.user_tariffs.index.note_about_defaults') %>
                <% end %>
              </p>
            <% end %>
            <div>
              <%= link_to t("schools.user_tariffs.index.gas.add_label"), new_energy_tariff_path(@tariff_holder, meter_type: :gas), class: 'btn btn-success' %>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
