<div class="row">
  <div class="col">
    <div class="d-flex justify-content-between align-items-center">
      <h1>Find activities</h1>
      <div>
        <%= link_to 'All activities', activity_categories_path, class: 'btn btn-outline-dark rounded-pill font-weight-bold'  %>
        <%= link_to 'Adult activities', intervention_type_groups_path, class: 'btn btn-outline-dark rounded-pill font-weight-bold'  %>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="col">
    <p>
      Search for activities by keyword
    </p>
  </div>
</div>

<%= form_tag activity_types_path, method: :get do %>
  <div class="row">
    <div class="col-md-10">
      <%= text_field_tag :query, params[:query], class: 'form-control' %>
    </div>
    <div class="col-md-2">
      <%= submit_tag "Search", class: "btn btn-primary" %>
    </div>
  </div>
  <br/>
  <div class="row">
    <div class="col">
      <div class="row activity-type-filters">
        <div class="col-md-2">
          <p>Limit results shown</p>
        </div>
        <div class="col-md-10">
          <% KeyStage.by_name.each do |key_stage| %>
                  <span>
                    <%= check_box_tag "key_stage[]", key_stage.name, @key_stages.include?(key_stage), id: "key_stage_#{key_stage.id}" %>
                    <%= label_tag "key_stage_#{key_stage.id}", key_stage.name %>
                  </span>
          <% end %>
          <br/>
          <% Subject.by_name.each do |subject| %>
                  <span>
                    <%= check_box_tag "subject[]", subject.name, @subjects.include?(subject), id: "subject_#{subject.id}" %>
                    <%= label_tag "subject_#{subject.id}", subject.name %>
                  </span>
          <% end %>
        </div>
      </div>
      <br/>
    </div>
  </div>
<% end %>

<% if @activity_types.empty? %>
  <% if params[:query] %>
    <p>
      No results found
    </p>
  <% end %>
<% else %>
  <h4><%= "#{pluralize(@pagy.count, 'result')} found"  %></h4>
  <br/>
  <% @activity_types.each do |activity_type| %>
    <%= render 'activity_types/activity_type', activity_type: activity_type, school: current_user_school %>
  <% end %>

  <br/>
  <br/>

  <div class="row justify-content-md-center">
    <div class="col col-md-2">
      <%== pagy_bootstrap_nav(@pagy) if @pagy.count > @pagy.items %>
    </div>
  </div>

<% end %>
