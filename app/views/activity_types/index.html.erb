<h1>Activity Types</h1>

<% ActivityCategory.all.each do |activity_category| %>
  <div class="container">
    <h2><%= activity_category.name %></h2>
    <div class="row">
    <table class="table table-striped">
      <thead>
        <tr>
          <th scope="col">Name</th>
          <th scope="col">Score</th>
          <th scope="col">Key Stages</th>
          <% if current_user_school %>
            <th scope="col">Completed</th>
          <% end %>
        </tr>
      </thead>

      <tbody>
        <% @activity_types.where(activity_category: activity_category).each do |activity_type| %>
          <tr class="<%= active(activity_type.active) %>" scope="row" >
            <td><%= link_to activity_type.name, activity_type_path(activity_type) %></td>
            <td><%= activity_type.score %></td>
            <td><%= activity_type.key_stage_list %></td>
            <% if current_user_school %>
              <td><%= current_user_school.activities.includes(:activity_type).where(activity_type: activity_type).any? ? 'Yes' : '' %></td>
            <% end %>
          </tr>
        <% end %>
      </tbody>
    </table>
    </div>
  </div>

<% end %>
