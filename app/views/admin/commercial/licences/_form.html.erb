<%= render Admin::HeaderNavComponent.new do |header_nav| %>
  <% header_nav.with_header title: title %>
  <% header_nav.with_button 'All licences', admin_commercial_licences_path %>
<% end %>

<div class="row">
  <div class="col">
    <% url = if licence.new_record?
               admin_commercial_licences_path
             else
               admin_commercial_licence_path(licence)
             end %>
    <%= simple_form_for(licence, as: :licence, url: url) do |f| %>
      <%= render 'shared/errors', subject: licence, subject_name: 'licence' %>
      <%= f.input :contract_id, collection: Commercial::Contract.all, include_blank: false %>
      <%= f.input :school_id, collection: School.visible.by_name, include_blank: false %>
      <%= f.input :status, collection: Commercial::Licence.statuses.keys.sort, include_blank: false %>

      <%= f.input :start_date, as: :tempus_dominus_date %>
      <%= f.input :end_date, as: :tempus_dominus_date %>

      <%= f.input :invoice_reference %>

      <%= f.submit 'Save', class: 'btn btn-primary' %>
      <%= link_to 'Cancel', admin_commercial_licences_path, class: 'btn' %>
    <% end %>
  </div>
</div>
