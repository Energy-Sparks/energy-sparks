<div class="clearfix bg-light py-2 px-2 my-2 border rounded">
  <%= form_tag url_for(controller: controller_path, action: :index, only_path: true), method: :get do |f| %>
    <div class="d-flex justify-content-between align-items-center">
      <div class="">
        <span class="nowrap">
          <%= label_tag :school_group, nil, class: 'small' %>
          <%= select_tag :school_group,
                         options_from_collection_for_select(SchoolGroup.organisation_groups.by_name,
                                                            :id,
                                                            :name,
                                                            params[:school_group]),
                         include_blank: 'Any School Group',
                         class: 'form-control-sm' %>
        </span>
        <span class="nowrap">
          <%= label_tag :user, nil, class: 'small' %>
          <%= select_tag :user,
                         options_from_collection_for_select(User.admins_by_name, :id, :display_name, params[:user]),
                         include_blank: 'Any Admin User',
                         class: 'form-control-sm' %>
        </span>
        <%= yield %>
      </div>
      <div class="d-flex justify-content-between">
        <%= submit_tag 'Filter', class: 'btn btn-sm' %>
        <%= link_to 'CSV',
                    url_for(
                      controller: controller_path,
                      action: :index,
                      only_path: true,
                      **params.permit(:school_group, :user, :meter_type).merge(format: :csv)
                    ),
                    class: 'ml-2 btn btn-sm' %>
      </div>
    </div>
  <% end %>
</div>
