<%= render 'schools/transport_surveys/header_nav' %>
<%= render 'schools/transport_surveys/nav' %>
<h3>Manage responses</h3>

<div class="table-responsive mt-2">
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Weather</th>
        <th>Passengers</th>
        <th>Journey Time</th>
        <th>Transport Method</th>
        <th>Carbon</th>
        <th>Survey time</th>
        <% if can? :delete, TransportSurveyResponse %>
          <th>Actions</th>
        <% end %>
      </tr>
    </thead>
    <tbody>
      <% @transport_survey.responses.each do |response| %>
        <tr scope="row">
          <td><%= response.weather_symbol %></td>
          <td><%= response.passengers %></td>
          <td><%= response.journey_minutes %> mins</td>
          <td><%= response.transport_type.image %> <%= response.transport_type.name %></td>
          <td><%= response.carbon.round(3) %>kg CO2</td>
          <td><%= nice_date_times response.surveyed_at %></td>
          <% if can? :delete, response %>
            <td><%= link_to 'Delete', school_transport_survey_response_path(@school, @transport_survey, response), method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-sm btn-danger' %></td>
          <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
