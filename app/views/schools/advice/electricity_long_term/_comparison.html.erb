<%= render 'schools/advice/section_title', section_id: 'comparison', section_title: t('advice_pages.electricity_long_term.analysis.comparison.title') %>

<% if annual_usage.kwh < vs_exemplar.kwh %>
  <%= component 'notice', status: :positive do %>
    <p><%= t('advice_pages.electricity_long_term.analysis.comparison.assessment.low.title') %></p>
    <p><%= t('advice_pages.electricity_long_term.analysis.comparison.assessment.low.percent_html', percent: format_unit(estimated_savings_vs_exemplar.percent, :percent)) %></p>
  <% end %>
<% else %>
  <%= component 'notice', status: :negative do %>
    <p><%= t('advice_pages.electricity_long_term.analysis.comparison.assessment.high.title') %></p>
    <p><%= t('advice_pages.electricity_long_term.analysis.comparison.assessment.high.percent_html', percent: format_unit(estimated_savings_vs_exemplar.percent, :percent)) %></p>
    <p><%= t('advice_pages.electricity_long_term.analysis.comparison.assessment.high.savings_html', estimated_savings_kwh: format_unit(estimated_savings_vs_exemplar.kwh, :kwh, false), estimated_savings_gbp: format_unit(estimated_savings_vs_exemplar.£, :£, false) ) %></p>
  <% end %>
<% end %>

<%= component 'chart', chart_type: :benchmark_electric_only_£, school: school do |c| %>
  <% c.with_title { t('advice_pages.electricity_long_term.charts.benchmark.title') } %>
  <% c.with_subtitle { t('advice_pages.electricity_long_term.charts.benchmark.subtitle') } %>
<% end %>

<p>
  <%= t('advice_pages.electricity_long_term.analysis.comparison.table_explanation', school_type: t('analytics.school_types.' + school.school_type)) %>
</p>

<%= render 'comparison_with_benchmark_table', annual_usage: annual_usage, vs_exemplar: vs_exemplar, vs_benchmark: vs_benchmark, estimated_savings_vs_exemplar: estimated_savings_vs_exemplar, estimated_savings_vs_benchmark: estimated_savings_vs_benchmark %>

<%= component 'chart', chart_type: :group_by_week_electricity_versus_benchmark, school: school do |c| %>
  <% c.with_title { t('advice_pages.electricity_long_term.charts.group_by_week_electricity_versus_benchmark.title') } %>
  <% c.with_subtitle { t('advice_pages.electricity_long_term.charts.group_by_week_electricity_versus_benchmark.subtitle') } %>
<% end %>
