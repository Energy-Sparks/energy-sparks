<table class="table table-sm table-with-totals">
  <thead class="thead-dark">
    <tr>
      <th><%= t('advice_pages.baseload.tables.columns.meter') %></th>
      <th class="text-right"><%= t('advice_pages.baseload.tables.columns.average_annual_baseload_kw') %></th>
      <th class="text-right"><%= t('advice_pages.baseload.tables.columns.average_annual_baseload_gbp') %></th>
      <th class="text-right"><%= t('advice_pages.baseload.tables.columns.change_since_previous_year') %></th>
      <th class="text-right"><%= t('advice_pages.baseload.tables.columns.percentage_of_total') %></th>
    </tr>
  </thead>
  <tbody>
    <% meters_by_percentage_baseload(baseload_meter_breakdown).each do |mpan_mprn, breakdown| %>
    <tr>
      <td><%= breakdown.meter.present? ? breakdown.meter.name_or_mpan_mprn : mpan_mprn %></td>
      <td class="text-right"><%= format_unit(breakdown.baseload_kw, :kw) %></td>
      <td class="text-right"><%= format_unit(breakdown.baseload_cost_£, :£) %></td>
      <td class="text-right"><%= format_unit(breakdown.baseload_change_kw, :kw) %></td>
      <td class="text-right"><%= format_unit(breakdown.percentage_baseload, :percent) %></td>
    </tr>
    <% end %>
    <tr>
      <td><%= t('advice_pages.baseload.tables.labels.all_meters') %></td>
      <td class="text-right"><%= format_unit(baseload_meter_breakdown_total.baseload_kw, :kw) %></td>
      <td class="text-right"><%= format_unit(baseload_meter_breakdown_total.baseload_cost_£, :£) %></td>
      <td class="text-right"><%= format_unit(baseload_meter_breakdown_total.baseload_change_kw, :kw) %></td>
      <td class="text-right"><%= format_unit(baseload_meter_breakdown_total.percentage_baseload, :percent) %></td>
    </tr>
  </tbody>
</table>
