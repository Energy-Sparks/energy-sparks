<%= render 'shared/dashboard_message', messageable: @school_group %>

<% content_for :header_title, "#{@school_group.name} - #{t('school_groups.titles.school_status')}" %>

<div class="d-flex justify-content-between align-items-center mb-2">
  <h3 class="mb-0"><%= t('common.schools') %></h3>

  <div class="dropdown">
    <button class="btn btn-sm btn-default dropdown-toggle"
      type="button" id="downloadDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      <%= fa_icon('download') %> <%= t('common.labels.download') %>
    </button>

    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="downloadDropdown">
      <%= link_to t('school_groups.schools_as_csv'),
                  school_group_status_index_path(@school_group, format: :csv),
                  class: 'dropdown-item' %>

      <%= link_to t('school_groups.meters_as_csv'),
                  meters_school_group_status_index_path(@school_group, format: :csv),
                  class: 'dropdown-item' %>
    </div>
  </div>
</div>

<%= render SchoolGroups::SchoolsStatusComponent.new(
      school_group: @school_group,
      schools: @schools,
      onboardings: @onboardings
    ) %>
