<p><%= t('school_groups.advice_pages.heating_control.analysis.summary') %></p>

<ul>
  <li>
    <%= link_to(t('school_groups.advice_pages.heating_control.analysis.potential_savings.title'),
                '#potential-savings') %>
  </li>
  <li>
    <%= link_to(t('school_groups.advice_pages.heating_control.analysis.comparisons.title'), '#comparison') %>
  </li>
  <li>
    <%= link_to(t('school_groups.advice_pages.analysis.other_reports.title'), '#other-reports') %>
  </li>
</ul>

<%= render 'schools/advice/section_title',
           section_id: 'potential-savings',
           section_title: t('school_groups.advice_pages.heating_control.analysis.potential_savings.title') %>

<%= t('school_groups.advice_pages.heating_control.analysis.potential_savings.table.header_html',
      modal_id: SchoolGroups::AdviceController::MODAL_ID) %>

<%= render 'school_groups/advice/shared/savings_table', school_group: @school_group,
                                                        categorised_savings: @categorised_savings,
                                                        advice_page: @advice_page,
                                                        schools: @schools %>

<%= render 'schools/advice/section_title',
           section_id: 'comparison',
           section_title: t('school_groups.advice_pages.heating_control.analysis.comparisons.title') %>

<%= render Charts::GroupComparisonChartComponent.new(school_group: @school_group,
                                                     report: @report) do |c| %>
  <% c.with_title { I18n.t('school_groups.advice_pages.heating_control.analysis.comparisons.chart.title') } %>
  <% c.with_subtitle do %>
    <%= t('school_groups.advice_pages.heating_control.analysis.comparisons.chart.subtitle') %>
  <% end %>
  <% c.with_header do %>
    <%= t('school_groups.advice_pages.heating_control.analysis.comparisons.chart.header') %>
  <% end %>
<% end %>

<%= t('school_groups.advice_pages.heating_control.analysis.comparisons.table.header_html',
      temperature: format_unit(@warm_day_temperature, :temperature)) %>

<%= render "comparisons/#{@report.key}/table",
           results: @results,
           report: @report,
           advice_page: @advice_page,
           table_name: :table,
           index_params: index_params,
           headers: @report_headers,
           colgroups: [],
           advice_page_tab: @advice_page_tab,
           table_number: 0 %>

<%= render 'schools/advice/section_title',
           section_id: 'other-reports',
           section_title: t('school_groups.advice_pages.analysis.other_reports.title') %>

<p>
  <%= t('school_groups.advice_pages.analysis.other_reports.introduction') %>
</p>

<%= render SchoolGroups::ComparisonReportListComponent.new(school_group: @school_group,
                                                           fuel_types: @fuel_types) do |list| %>
 <% list.with_link t('school_groups.advice.comparison_reports.links.change_thermostat'),
                   report: :thermostat_sensitivity,
                   fuel_type: :gas %>
 <% list.with_link t('school_groups.advice.comparison_reports.links.heating_times'),
                   report: :heating_coming_on_too_early,
                   fuel_type: :gas %>
 <% list.with_link t('school_groups.advice.comparison_reports.links.thermostatic_control'),
                   report: :thermostatic_control,
                   fuel_type: :gas %>
 <% list.with_link t('school_groups.advice.comparison_reports.links.heating_hot_water'),
                   report: :heating_vs_hot_water,
                   fuel_type: :gas %>
 <% list.with_link t('school_groups.advice.comparison_reports.links.hot_water_efficiency'),
                   report: :hot_water_efficiency,
                   fuel_type: :gas %>
<% end %>
